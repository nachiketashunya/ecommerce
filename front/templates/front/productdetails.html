{% extends 'base/base.html' %}
{% block content %}

<div class="row">
	<div class="col-md-12">
		<h1 style="margin-left: 7px;">Product Details </h1>
	</div>
</div>

<div class="row">
	<div class="col-md-4 col-xs-12">
		<div style="margin-left: 8px;">
			<img src="{{product.image.url}}" width="100%"> <!-- image is always used with (.url) -->
		</div>
	</div>	
	<div class="col-md-4 col-xs-12">
		<div style="margin-left: 20px;">
			<p><strong style="font-size: 20px;"> Title </strong> : {{product.title}} <br>
			    <strong style="font-size: 20px;">Description</strong> : {{product.description}} <br>
			    <strong style="font-size: 20px;">Price</strong> : &#8377; {{product.price}}
			</p>
		</div>

		<form method="POST" action="/cart/cartupdate/">
			{% csrf_token %}

			<input type="hidden" name="product_id" value="{{product.id}}">
			<span class="submit-span"> 

				{% if product in cart.products.all %}

				<div class="btn-group">
					<a href = "/cart" class="btn btn-primary checkout-button" style="margin-right: 20px;">In Cart</a>

					<button type="submit" class="btn btn-danger">Remove?</button>
				</div>

				{% else %}

				<button class="btn btn-success">Add To Cart </button>


				{% endif %}
			</span>

		</form>

	</div>

	<!-- review form -->
	<div class="col-md-4 col-xs-12" style="padding-right: 20px;">
		<form method = "POST" >
			{% csrf_token %}
			{{ form.as_p }}

			<input type = "submit" value="Review" class="btn btn-warning">
		</form>
		
	</div>
</div>

<div class="row">
	<div class="col-md-8">
		<hr>
		<h3 style="padding-left: 10px;"> Product Reviews </h3>
		<div style="border: 1px solid #aaa; padding-right: 8px; margin-left: 5px; ">

			{% for review in reviews %}  <!-- pagination -->
			<blockquote class="blockquote text-right">  <!-- blockqote for all reviews -->
				<p class="mb-0" style="font-size: 18px;"> {{review.description}}.</p>
				<footer class="blockquote-footer"> <cite title="{{review.reviewed_by}}">{{review.reviewed_by}} </cite>
				</footer>			
			</blockquote>

		    {% endfor %}
		</div>

		<div class="pagination">
			<span class="step-links">
				{% if reviews.has_previous %}  <!-- check for previous page -->
				<a href="?page= 1"> &lt; &lt;First </a>
				<a href="?page= {{reviews.previous_page_number}}">Previous</a>
				{% endif %}

				<span class="current" style="margin-left: 8px;">  <!-- show the current page -->
					Page {{reviews.number}} of {{reviews.paginator.num_pages}}

					{% if reviews.has_next %} <!-- check for next page -->
					<a href="?page= {{reviews.next_page_number}}"> Next </a>
					<a href="?page= {{reviews.paginator.num_pages}}">Last</a>
					{% endif %}
			    </span>
			</span>		
        </div>
	</div>
</div>

{% endblock %}